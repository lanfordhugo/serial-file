# 串口文件传输工具

## 项目简介

基于串口通信的可靠文件传输工具，支持单文件和批量文件的智能传输。采用自定义协议进行数据帧封装，具备校验和验证、进度显示、错误重传等功能。

**🚀 核心特性**：

- **智能路径检测**: 自动识别文件/文件夹，选择相应传输方式
- **可靠传输协议**: 校验和验证和错误重传机制  
- **全面测试覆盖**: 186个测试用例保障代码质量
- **统一CLI接口**: 简单易用的命令行界面
- **智能探测模式**: 自动设备发现和参数协商，一键传输

---

## 快速开始

详细安装与使用说明，请参考：[用户操作指南](docs/USER_GUIDE.md)

### 代码集成

```python
from serial_file_transfer.cli.file_transfer import FileTransferCLI

# 智能模式发送（推荐：自动探测和协商）
success = FileTransferCLI.smart_send()

# 智能模式接收（推荐：自动响应和配置）
success = FileTransferCLI.smart_receive()

# 手动模式（兼容传统使用方式）
success = FileTransferCLI.send()      # 手动发送
success = FileTransferCLI.receive()   # 手动接收
```

---

## 项目架构

项目采用模块化分层设计，核心模块职责清晰：

```text
src/serial_file_transfer/
├── config/          # 配置管理（常量、设置）
├── core/            # 核心功能（串口、数据帧、校验）
├── transfer/        # 传输逻辑（发送、接收、批量）
├── utils/           # 工具函数（日志、进度）
└── cli/             # 命令行接口
```

详细技术架构，请参考：[技术架构文档](docs/ARCHITECTURE.md)

### 技术栈

- **语言**: Python 3.7+
- **核心依赖**: pyserial
- **测试框架**: pytest
- **代码规范**: PEP 8 + 类型提示

---

## 文档导航

| 文档 | 内容 | 适合读者 |
|------|------|----------|
| 📋 **[用户指南](docs/USER_GUIDE.md)** | 详细使用说明、智能模式、故障排除 | 终端用户 |
| 🏗️ **[技术架构](docs/ARCHITECTURE.md)** | 项目结构、核心模块、类设计 | 开发者 |
| 📡 **[协议规范](docs/PROTOCOL.md)** | 传输协议、智能探测、数据格式 | 技术人员 |
| 🧪 **[测试框架](docs/TESTING.md)** | 测试体系、pytest使用、Mock技术 | 测试工程师 |
| 🔧 **[开发指南](docs/DEVELOPMENT.md)** | 环境配置、代码规范、贡献流程 | 贡献者 |
| 📚 **[文档中心](docs/README.md)** | 文档索引、快速查找 | 所有用户 |

---

## 主要功能

本工具提供以下核心功能：

### ✅ 智能传输

- 自动路径检测（文件/文件夹）
- 统一CLI接口
- 智能探测协商协议

### ✅ 可靠通信  

- 自定义数据帧格式
- 校验和验证机制
- 错误重传和断点续传

### ✅ 性能优化

- 大文件分块传输
- 可配置传输参数
- 多波特率支持

### ✅ 质量保障

- 186个测试用例
- 90%+ 测试覆盖率
- 完整的Mock测试

---

## 测试与质量

项目采用TDD（测试驱动开发）模式，具备全面的测试覆盖。

### 运行测试

```bash
# 运行所有测试
pytest tests/ -v

# 查看测试覆盖率
pytest tests/ --cov=src/serial_file_transfer --cov-report=html
```

详细测试指南和统计，请参考：[测试框架文档](docs/TESTING.md)

---

## 版本信息

### 当前版本：v1.3.0 ✨

- 🚀 **智能探测协商协议**: 7步自动协商流程，一键传输
- 📡 **自动设备发现**: 115200波特率探测，自动参数协商
- ⚡ **动态波特率切换**: 支持高达1728000波特率的智能切换
- 🧪 **全面测试覆盖**: 186个测试用例，48个新增探测协议测试
- 🔧 **完全向后兼容**: 智能模式与手动模式并存

### 稳定版本：v1.2.0

- 🧪 138个测试用例的完整测试体系
- 🎯 测试驱动开发和高质量保障
- 🔍 先进的Mock测试技术

---

## 贡献与支持

### 🤝 参与贡献

欢迎通过以下方式参与贡献：

- **Fork** 项目并提交 Pull Request
- **提交** Bug报告或功能建议

详细贡献指南请参考：[开发指南](docs/DEVELOPMENT.md)

### 📞 获取帮助

- 📖 **使用问题**: 查看 [用户指南](docs/USER_GUIDE.md)
- 🔧 **技术问题**: 查看 [技术架构](docs/ARCHITECTURE.md)
- 🐛 **Bug报告**: 提交 GitHub Issues
- 💬 **功能建议**: 参与 GitHub Discussions

### 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

## 致谢

感谢所有贡献者和用户的支持，让这个项目变得更好！

**⭐ 如果这个项目对你有帮助，请给个Star支持一下！**
