# 串口文件传输工具

## 项目简介

这是一个基于串口通信的文件传输工具，支持单个文件和批量文件的可靠传输。采用自定义协议进行数据帧封装，具备校验和验证、进度显示、错误重传等功能。

## 主要功能

- ✅ 单文件传输：支持任意类型文件的串口传输
- ✅ 批量文件传输：支持整个文件夹的批量传输
- ✅ 数据校验：采用校验和算法确保数据完整性
- ✅ 进度显示：实时显示传输进度和速度
- ✅ 错误处理：支持断点续传和错误重试
- ✅ 多波特率支持：支持115200到1728000波特率

## 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

### 单文件传输

#### 发送端

```bash
python examples/single_send_example.py
```

#### 接收端

```bash
python examples/single_recv_example.py
```

### 批量文件传输

#### 发送端

```bash
python examples/multi_send_example.py
```

#### 接收端

```bash
python examples/multi_recv_example.py
```

## 使用说明

1. **准备硬件**：连接两台设备的串口，确保波特率、数据位等参数一致
2. **启动接收端**：先在接收设备上运行接收程序
3. **启动发送端**：在发送设备上运行发送程序
4. **开始传输**：程序会自动建立连接并开始文件传输

## 项目结构

```
serial_file_transfer/
├── src/serial_file_transfer/    # 核心代码
│   ├── config/                  # 配置管理
│   ├── core/                    # 核心功能
│   ├── transfer/               # 传输逻辑
│   ├── utils/                  # 工具函数
│   └── cli/                    # 命令行接口
├── tests/                      # 测试代码
└── examples/                   # 使用示例
```

## 协议说明

### 数据帧格式

```
| 命令字(1B) | 数据长度(2B) | 数据内容(NB) | 校验和(2B) |
```

### 命令字定义

- `0x61`: 请求文件大小
- `0x62`: 回复文件大小
- `0x63`: 请求数据包
- `0x64`: 发送数据包
- `0x51`: 请求文件名
- `0x52`: 回复文件名

## 开发指南

### 环境要求

- Python 3.7+
- pyserial
- pytest (用于测试)

### 运行测试

```bash
pytest tests/
```

### 代码规范

- 遵循PEP 8代码风格
- 使用类型提示
- 编写中文注释和文档字符串
- 每个文件不超过600行

## 许可证

MIT License

## 贡献指南

欢迎提交Issue和Pull Request来改进项目。

## 更新历史

### v1.0.0

- 重构代码结构，提升可维护性
- 添加完整的类型提示
- 优化异常处理机制
- 添加单元测试支持
